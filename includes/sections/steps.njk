<section id="steps" class="steps-section">
  <div class="container">
    <header class="steps-header animate-on-scroll">
      <h2>{{ section_data.title }}</h2>
      {% if section_data.subtitle %}
        <p class="steps-subtitle">{{ section_data.subtitle }}</p>
      {% endif %}
    </header>

    <div class="steps-grid">
      {% for step in section_data.steps %}
        <div class="step-card animate-on-scroll expandable" style="--delay: {{ loop.index0 * 0.2 }}s;">
          <div class="step-number">{{ step.number }}</div>
          <h3>{{ step.title }}</h3>
          <p>{{ step.text }}</p>

          {% if step.resources %}
            <button class="toggle-btn">Ver materiales</button>
            <div class="extra-content">
              <ul>
                {% for resource in step.resources %}
                  <li>
                    <span class="resource-label">{{ resource.label }}</span>
                    {% if "drive.google.com/drive/folders" in resource.url %}
                      <a href="{{ resource.url }}" target="_blank" rel="noopener" class="btn-link">📂 Abrir carpeta</a>
                    {% else %}
                      <a href="{{ resource.url }}" target="_blank" rel="noopener" class="btn-link">👁 Ver</a>
                      <a href="{{ resource.url }}" target="_blank" rel="noopener" download class="btn-link">📥 Descargar</a>
                    {% endif %}
                  </li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>
